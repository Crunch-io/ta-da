---
title: "Headings and subtotals are here"
description: "A new way to view categorical variables."
date: "2017-12-14T13:20:47-04:00"
draft: false
weight: 20TZ
tags: ["analysis", "cubes", "subtotals"]
categories: ["feature"]
output:
  html_document:
    keep_md: true
---

At Crunch we are constantly learning new ways that our users—and their clients—think about their data, and are always excited to add new features to help improve our users' workflow. A common task in the Market Research world is to collapse two or more categories together to see how the collapsed categories compare to one another. For example, if you asked people to rate their preference on a scale of 1-10 you might want to see how the people who provide a rating between 1 and 5 compare to those who rated it between 6 and 10. This goes by a number of names like _Top Box_, _Top Two Box_, or _Nets_. Crunch has long had the ability to create a new variable by combining the categories of an existing variable, but sometimes users want to see the subtotaled values alongside the original categories instead of creating a new, separate variable.  

We recently implemented functionality that allows users to easily create and customize headings and subtotals within categorical variables. Let's take a look at what these look like in our app, as well as how to set and manipulate them using [our R `crunch` package](http://crunch.io/r/crunch/). If you want to work with headings and subtotals in R,  make sure to install our most recent version by running `devtools::install_github("Crunch-io/rcrunch", build_vignettes=TRUE)`.

# What do subtotals look like in the app?

{{< figure src="../images/subtotals-diversity.png" class="floating-right" width="250px">}}

We're going to look at data from the Stack Overflow Developer Survey that [we looked at before](../devs-as-users/). Here, we have a question which asks respondents to rate the importance of diversity on a five point scale. Perhaps the five point scale is to granular and instead we just want to get a feeling for those who _generally_ agree compared to those who _generally_ disagree. We could make a new variable that collapses "Strongly disagree" and "Disagree" responses into one category and "Somewhat agree", "Agree", and "Strongly agree" into another, but what if we wanted to see these groups right next to the other categories? Subtotals, to the rescue! Here's what that would look like in the app.

But how do we get there? First, and most importantly, we can create these subtotals in the web app be clicking on the variable's _properties_, and then clicking _Headings and Subtotals_.

{{< figure src="../images/subtotals-edit.png" class="floating-left" width="600px">}}

Once there, you're just a few clicks, drags, and drops away from fancy new subtotals. It's also possible to create subtotals and headings [programmatically in R](http://crunch.io/r/crunch/articles/subtotals.html). 

# Summary

We've already heard from enthusiastic users that headings and subtotals are helping ease their workflows, and their clients are excited to be able to see grouped subtotals right on variable cards in the app. And this is just the beginning, we are working on adding other features for transforming how variables look in the app. Have a favorite aggregation you want to see? Have an interesting use-case or workflow using headings and subtotals? [Let us know!](mailto:support@crunch.io)
